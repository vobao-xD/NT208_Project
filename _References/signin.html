<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng nhập - Text to Everything</title>
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
</head>
<body class="signin-page">
    <div class="signin-container">
        <h1>Đăng nhập</h1>
        <form id="signin-form">
            <div class="form-control">
                <label for="username"><i class="fa fa-user"></i> Tên đăng nhập</label>
                <input type="text" id="username" placeholder="Nhập username" required>
            </div>
            
            <div class="form-control">
                <label for="password"><i class="fa fa-lock"></i> Mật khẩu</label>
                <input type="password" id="password" placeholder="Nhập mật khẩu" required>
            </div>
            
            <button class="submit-button-signin" type="submit">Đăng nhập</button>
            <p id="error-message" class="error-message"></p>
        </form>

        <div class="separator">
            <span>HOẶC ĐĂNG NHẬP BẰNG</span>
        </div>

        <div class="social-buttons">
            <button class="btn Github">
                <img 
                    src="https://cdn-icons-png.flaticon.com/512/25/25231.png" 
                    alt="Github" 
                    width="24" 
                    height="24"
                >
                Github
            </button>
            <button class="btn Google" onclick="redirectToGoogleAuth()">
                <img 
                    src="https://png.pngtree.com/png-clipart/20230916/original/pngtree-google-internet-icon-vector-png-image_12256707.png" 
                    alt="Google"
                >
                Google
            </button>
        </div>

        <p>
            Chưa có tài khoản? 
            <a class="link-in" href="signup.html">Đăng ký ngay</a>
        </p>
    </div>
</body>
<script>
function redirectToGoogleAuth() {
    window.location.href = "http://localhost:8000/auth/google";
}

async function handleGoogleLogin(accessToken) {
try {
// Gửi token Google lên server backend để lấy JWT token
const response = await fetch("http://localhost:8000/auth/google/callback", {
method: "POST",
headers: { "Content-Type": "application/json" },
body: JSON.stringify({ access_token: accessToken })
});

const data = await response.json();
if (data.access_token) {
// Lưu JWT token vào localStorage
localStorage.setItem("jwt_token", data.access_token);

// Chuyển hướng về trang chính
window.location.href = "index.html";
} else {
alert("Đăng nhập thất bại!");
}
} catch (error) {
console.error("Lỗi khi xác thực với backend:", error);
}
}
</script>
</html>
